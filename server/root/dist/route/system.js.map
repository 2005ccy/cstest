{"version":3,"sources":["../../src/route/system.js"],"names":["SystemEvent","props","app","all","cors","req","res","next","header","method","send","Event"],"mappings":";;;;;;;;;;;;;;AACA;IACqBA,W;;;;;;;;;;;;;AAEjB;wCACgB;AACZ,iBAAKC,KAAL,CAAWC,GAAX,CAAeC,GAAf,CAAmB,GAAnB,EAAwB,KAAKC,IAA7B;AACH;;AAED;;;;6BACKC,G,EAAKC,G,EAAKC,I,EAAM;AACjBD,gBAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,gBAAIE,MAAJ,CAAW,8BAAX,EAA2C,yFAA3C;AACAF,gBAAIE,MAAJ,CAAW,8BAAX,EAA2C,iCAA3C;;AAEA,gBAAIH,IAAII,MAAJ,IAAc,SAAlB,EAA6B;AACzBH,oBAAII,IAAJ,CAAS,GAAT,EADyB,CACV;AAClB,aAFD,MAEO;AACHH;AACH;AACJ;;;;EAlBoCI,K;;kBAApBX,W","file":"system.js","sourcesContent":["\n// 构建系统路由\nexport default class SystemEvent extends Event {\n\n    // 事件完成挂载\n    eventDidMount() {\n        this.props.app.all('*', this.cors);\n    }\n\n    // 跨域支持\n    cors(req, res, next) {\n        res.header('Access-Control-Allow-Origin', '*');\n        res.header('Access-Control-Allow-Headers', 'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild');\n        res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n\n        if (req.method == 'OPTIONS') {\n            res.send(200); //让options请求快速返回\n        } else {\n            next();\n        }\n    }\n}"]}