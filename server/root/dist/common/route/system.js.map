{"version":3,"sources":["../../../src/common/route/system.js"],"names":["System","app","init","all","cors","req","res","next","header","method","send","Base"],"mappings":";;;;;;;;AACA;;;;;;;;;;+eADA;;;AAGA;IACqBA,M;;;AAEjB;AACA,oBAAYC,GAAZ,EAAiB;AAAA;;AAAA;;AAEb,cAAKA,GAAL,GAAWA,GAAX;AACA,cAAKC,IAAL;AAHa;AAIhB;;AAED;;;;;+BACO;AACH;AACA,iBAAKD,GAAL,CAASE,GAAT,CAAa,GAAb,EAAkB,KAAKC,IAAvB;AACH;;AAED;;;;6BACKC,G,EAAKC,G,EAAKC,I,EAAM;AACjBD,gBAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,gBAAIE,MAAJ,CAAW,8BAAX,EAA2C,yFAA3C;AACAF,gBAAIE,MAAJ,CAAW,8BAAX,EAA2C,iCAA3C;;AAEA,gBAAIH,IAAII,MAAJ,IAAc,SAAlB,EAA6B;AACzBH,oBAAII,IAAJ,CAAS,GAAT,EADyB,CACV;AAClB,aAFD,MAEO;AACHH;AACH;AACJ;;;;EA1B+BI,I;;kBAAfX,M","file":"system.js","sourcesContent":["// 导入域组件\nimport domain from 'domain';\n\n// 系统操作类\nexport default class System extends Base {\n\n    // 构造方法\n    constructor(app) {\n        super();\n        this.app = app;\n        this.init();\n    }\n\n    // 初始化方法\n    init() {\n        // 支持跨域\n        this.app.all('*', this.cors);\n    }\n\n    // 跨域支持\n    cors(req, res, next) {\n        res.header('Access-Control-Allow-Origin', '*');\n        res.header('Access-Control-Allow-Headers', 'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild');\n        res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n\n        if (req.method == 'OPTIONS') {\n            res.send(200); //让options请求快速返回\n        } else {\n            next();\n        }\n    }\n}"]}